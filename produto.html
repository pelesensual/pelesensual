<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../images/logos/PS-Logo_05.png" type="image/png">
    <title>Produto - Pele Sensual Moda Íntima</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/header-decoration.css">
    <link rel="stylesheet" href="../css/modal-corrections.css">
    <link rel="stylesheet" href="../css/product-zoom.css">
    <link rel="stylesheet" href="/css/cart.css">
</head>
<body>
    <!-- Botão de Alternância Varejo/Atacado -->
    <div class="mode-toggle-container">
        <div class="mode-toggle">
            <button id="retail-mode" class="active">Varejo</button>
            <button id="wholesale-mode">Atacado</button>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="logo">
                <img src="../images/logos/PS-Logo_05.png" alt="Pele Sensual" class="main-logo">
            </div>
            <p class="slogan">Conforto, leveza e qualidade</p>
            <nav>
                <ul>
                    <li><a href="../index.html">Início</a></li>
                    <li><a href="../index.html#produtos-adulto">Adulto</a></li>
                    <li><a href="../index.html#produtos-infantil">Infantil</a></li>
                    <li><a href="embalagens.html">Embalagens</a></li>
                    <li><a href="../index.html#contato">Contato</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Produto Detail -->
    <section class="product-detail">
        <div class="container">
            <div class="product-container">
                <div class="product-images">
                    <div class="product-image-container">
                        <img id="product-main-image" 
                             src="../images/logos/PS-Logo_05.png" 
                             alt="Produto" 
                             class="product-main-image product-image"
                             data-zoomable="true">
                    </div>
                    <div class="product-thumbnails">
                        <!-- Thumbnails serão carregadas dinamicamente -->
                    </div>
                </div>

                <div class="product-info">
                    <h1 id="product-name">Nome do Produto</h1>
                    <p id="product-price" class="price" data-price="0">R$ 0,00</p>
                    <p id="product-material" class="material">Material: </p>
                    <p id="product-description" class="description">Descrição do produto...</p>
                    <p id="product-ref" class="ref">REF: </p>

                    <div class="size-selector">
                        <h3>Tamanho:</h3>
                        <div id="size-options" class="size-options">
                            <!-- Opções de tamanho serão carregadas dinamicamente -->
                        </div>
                    </div>

                    <div class="quantity-selector">
                        <h3>Quantidade:</h3>
                        <div class="quantity-control">
                            <button id="decrease-quantity" type="button">-</button>
                            <input id="product-quantity" type="number" min="1" value="1">
                            <button id="increase-quantity" type="button">+</button>
                        </div>
                    </div>

                    <div class="product-actions">
                        <button id="add-to-cart-btn" 
                                class="btn add-to-cart" 
                                data-id="" 
                                data-name="" 
                                data-price="" 
                                data-image="">
                            Adicionar ao Carrinho
                        </button>
                        <button id="buy-now-btn" 
                                class="btn buy-now" 
                                data-id="" 
                                data-name="" 
                                data-price="" 
                                data-image="">
                            Comprar Agora
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Carrinho -->
    <div class="cart">
        <div class="cart-header">
            <h3>Seu Carrinho</h3>
            <button class="cart-close">&times;</button>
        </div>
        <div class="cart-items">
            <!-- Itens do carrinho serão adicionados dinamicamente -->
        </div>
        <div class="cart-total">
            <span>Total:</span>
            <span class="cart-total-value">R$ 0,00</span>
        </div>
        <div class="cart-buttons">
            <button class="btn checkout-button">Finalizar Compra</button>
            <button class="btn btn-secondary continue-shopping">Continuar Comprando</button>
        </div>
    </div>

    <!-- Botão flutuante do carrinho -->
    <div class="cart-button">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count">0</span>
    </div>

    <!-- Botão WhatsApp -->
    <div class="whatsapp-button">
        <a href="https://wa.me/5585999436548" target="_blank">
            <i class="fab fa-whatsapp"></i>
        </a>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Pele Sensual</h3>
                    <p>Moda íntima com conforto, leveza e qualidade.</p>
                    <p><i class="fas fa-phone"></i> (85) 99943-6548</p>
                    <p><i class="fas fa-envelope"></i> pelesensualmodaintima@gmail.com</p>
                    <div class="social-links">
                        <a href="https://www.instagram.com/pelesensual?igsh=bXU3a2Z6NmVwbzhz" target="_blank"><i class="fab fa-instagram"></i></a>
                        <a href="https://wa.me/5585999436548" target="_blank"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                                </div>
                <div class="footer-section">
                    <h3>Categorias</h3>
                    <ul>
                        <li><a href="../index.html#produtos-adulto">Moda Íntima Adulto</a></li>
                        <li><a href="../index.html#produtos-infantil">Moda Íntima Infantil</a></li>
                        <li><a href="../index.html#embalagens">Embalagens e Kits</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Informações</h3>
                    <ul>
                        <li><a href="../index.html#sobre">Sobre Nós</a></li>
                        <li><a href="../index.html#contato">Contato</a></li>
                        <li><a href="#">Política de Privacidade</a></li>
                        <li><a href="#">Termos e Condições</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                &copy; 2025 Pele Sensual Moda Íntima. Todos os direitos reservados.
            </div>
        </div>
    </footer>
<!-- Scripts -->

<!-- 2. Mode toggle que depende do cart -->
<script src="/js/mode-toggle.js"></script>

<!-- 3. Image zoom que é independente -->
<script src="/js/image-zoom.js"></script>
<script src="/js/image-modal.js"></script>
<!-- 4. Main por último pois pode depender dos outros -->
<script src="/js/main.js"></script>

<!-- 5. Script para carregar dados do produto -->
<script>
    // Base de dados dos produtos
        const productsData = {
            '016': {
                id: '016',
                name: 'Calça Microfibra',
                price: 4.70,
                material: 'Microfibra',
                description: 'Calça confortável em microfibra, ideal para o dia a dia. Tecido macio e respirável.',
                sizes: ['P', 'M', 'G', 'GG'],
                images: ['../images/calca_microfibra_frente_1.png'],
                additionalImages: [
                    '../images/calca_microfibra_frente_2.png',
                    '../images/calca_microfibra_costas_1.png'
                ],
                ref: '016'
            },
            '012': {
                id: '012',
                name: 'Calça Modal',
                price: 5.20,
                material: 'Modal',
                description: 'Calça em modal, tecido natural e super macio. Conforto garantido.',
                sizes: ['P', 'M', 'G', 'GG'],
                images: ['../images/calcola_modal_frente_1.png'],
                additionalImages: [
                    '../images/calcola_modal_costas_1.png'
                ],
                ref: '012'
            }
            // Adicione mais produtos conforme necessário
        };

        // Função para obter parâmetros da URL com debug
        function getUrlParameter(name) {
            try {
                const urlParams = new URLSearchParams(window.location.search);
                const param = urlParams.get(name);
                console.log('Buscando parâmetro:', name, 'Valor encontrado:', param);
                return param;
            } catch (error) {
                console.error('Erro ao buscar parâmetro:', error);
                return null;
            }
        }

        // Função para criar thumbnail
        function createThumbnail(imgSrc, index) {
            const thumbnail = document.createElement('div');
            thumbnail.className = 'thumbnail' + (index === 0 ? ' active' : '');
            
            const img = document.createElement('img');
            img.src = imgSrc;
            img.alt = `Imagem ${index + 1}`;
            img.className = 'product-image';
            
            thumbnail.appendChild(img);
            
            thumbnail.addEventListener('click', (e) => {
                e.stopPropagation();
                const mainImage = document.getElementById('product-main-image');
                mainImage.src = imgSrc;
                document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
                thumbnail.classList.add('active');
                console.log('Thumbnail clicada:', imgSrc); // Debug
            });

            return thumbnail;
        }

        // Função para configurar botões de ação
        function setupActionButtons(product) {
            const addToCartBtn = document.getElementById('add-to-cart-btn');
            const buyNowBtn = document.getElementById('buy-now-btn');
            
            [addToCartBtn, buyNowBtn].forEach(btn => {
                btn.dataset.id = product.id;
                btn.dataset.name = product.name;
                btn.dataset.price = product.price;
                btn.dataset.image = product.images[0];
                
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    
                    const selectedSize = document.querySelector('.size-option.selected');
                    if (!selectedSize) {
                        alert('Por favor, selecione um tamanho');
                        return;
                    }
                    
                    const quantity = parseInt(document.getElementById('product-quantity').value);
                    console.log('Clique no botão:', btn.className, 'Quantidade:', quantity); // Debug
                    
                    if (btn.classList.contains('add-to-cart')) {
                        cart.addItem(product.id, product.name, product.price, selectedSize.dataset.size, product.images[0], quantity);
                    } else {
                        cart.addItem(product.id, product.name, product.price, selectedSize.dataset.size, product.images[0], quantity);
                        window.location.href = 'checkout.html';
                    }
                });
            });
        }

        // Função para carregar detalhes do produto com debug
        function loadProductDetails() {
            const productId = getUrlParameter('id');
            console.log('ID do produto:', productId); // Debug
            console.log('Produtos disponíveis:', Object.keys(productsData)); // Debug
            console.log('URL atual:', window.location.href); // Debug
            
            const product = productsData[productId];
            console.log('Produto encontrado:', product); // Debug

            if (!product) {
                document.getElementById('product-name').textContent = 'Produto não encontrado';
                document.getElementById('product-description').textContent = 'O produto que você está procurando não está disponível ou o ID é inválido.';
                console.error('Produto não encontrado. ID:', productId);
                return;
            }

            // Preencher informações do produto
            document.getElementById('product-name').textContent = product.name;
            document.getElementById('product-price').textContent = `R$ ${product.price.toFixed(2)}`;
            document.getElementById('product-price').dataset.price = product.price;
            document.getElementById('product-material').textContent = `Material: ${product.material}`;
            document.getElementById('product-description').textContent = product.description;
            document.getElementById('product-ref').textContent = `REF: ${product.ref}`;

            // Atualizar imagem principal
            const mainImage = document.getElementById('product-main-image');
            mainImage.src = product.images[0];
            mainImage.alt = product.name;
            console.log('Imagem principal atualizada:', mainImage.src); // Debug

            // Carregar todas as imagens do produto
            if (product.additionalImages && product.additionalImages.length > 0) {
                const thumbnailsContainer = document.querySelector('.product-thumbnails');
                thumbnailsContainer.innerHTML = '';
                
                // Adicionar imagem principal como primeira thumbnail
                const mainThumbnail = createThumbnail(product.images[0], 0);
                thumbnailsContainer.appendChild(mainThumbnail);

                // Adicionar imagens adicionais
                product.additionalImages.forEach((imgSrc, index) => {
                    const thumbnail = createThumbnail(imgSrc, index + 1);
                    thumbnailsContainer.appendChild(thumbnail);
                });
                console.log('Thumbnails carregadas:', product.additionalImages.length + 1); // Debug
            }

            // Preencher opções de tamanho
            const sizeOptions = document.getElementById('size-options');
            sizeOptions.innerHTML = '';
            product.sizes.forEach(size => {
                const sizeButton = document.createElement('button');
                sizeButton.type = 'button';
                sizeButton.className = 'size-option';
                sizeButton.textContent = size;
                sizeButton.dataset.size = size;
                sizeButton.addEventListener('click', function(e) {
                    e.stopPropagation();
                    document.querySelectorAll('.size-option').forEach(btn => btn.classList.remove('selected'));
                    this.classList.add('selected');
                    console.log('Tamanho selecionado:', size); // Debug
                });
                sizeOptions.appendChild(sizeButton);
            });
            console.log('Tamanhos carregados:', product.sizes); // Debug

            // Configurar botões de ação
            setupActionButtons(product);
            console.log('Botões de ação configurados'); // Debug

            // Configurar controles de quantidade
            setupQuantityControls();
            console.log('Controles de quantidade configurados'); // Debug
        }

        // Função para configurar controles de quantidade
        function setupQuantityControls() {
            const quantityInput = document.getElementById('product-quantity');
            
            document.getElementById('decrease-quantity').addEventListener('click', (e) => {
                e.stopPropagation();
                const currentValue = parseInt(quantityInput.value);
                if (currentValue > 1) {
                    quantityInput.value = currentValue - 1;
                    console.log('Quantidade diminuída:', quantityInput.value); // Debug
                }
            });

            document.getElementById('increase-quantity').addEventListener('click', (e) => {
                e.stopPropagation();
                const currentValue = parseInt(quantityInput.value);
                quantityInput.value = currentValue + 1;
                console.log('Quantidade aumentada:', quantityInput.value); // Debug
            });

            quantityInput.addEventListener('change', (e) => {
                e.stopPropagation();
                if (parseInt(quantityInput.value) < 1) {
                    quantityInput.value = 1;
                }
                console.log('Quantidade alterada manualmente:', quantityInput.value); // Debug
            });
        }

        // Carregar detalhes do produto quando a página carregar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Página carregada, iniciando carregamento do produto...'); // Debug
            loadProductDetails();
        });
    </script>
</body>
</html>
